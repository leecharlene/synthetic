
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise Resource Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .form-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .form-section h2 {
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a5568;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .date-picker-container {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .date-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            background: white;
        }

        .date-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .calendar-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
        }

        .calendar-nav {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .calendar-nav:hover {
            background: #e2e8f0;
        }

        .calendar-title {
            font-weight: 600;
            color: #4a5568;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #e2e8f0;
            margin: 10px;
        }

        .calendar-day-header {
            background: #f8fafc;
            padding: 10px;
            text-align: center;
            font-weight: 600;
            font-size: 12px;
            color: #718096;
        }

        .calendar-day {
            background: white;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calendar-day:hover {
            background: #edf2f7;
        }

        .calendar-day.selected {
            background: #667eea;
            color: white;
        }

        .calendar-day.other-month {
            color: #cbd5e0;
        }

        .dropdown-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        .dropdown-select:focus {
            outline: none;
            border-color: #667eea;
        }

        .time-picker {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .time-input {
            width: 80px;
            padding: 8px;
            border: 2px solid #e2e8f0;
            border-radius: 4px;
            text-align: center;
        }

        .time-spinner {
            display: flex;
            flex-direction: column;
        }

        .time-spinner button {
            background: #667eea;
            color: white;
            border: none;
            padding: 2px 8px;
            cursor: pointer;
            font-size: 12px;
        }

        .time-spinner button:hover {
            background: #5a67d8;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #718096;
            color: white;
        }

        .btn-secondary:hover {
            background: #4a5568;
        }

        .quick-date-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .quick-date-btn {
            padding: 8px 16px;
            background: #edf2f7;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .quick-date-btn:hover {
            background: #667eea;
            color: white;
        }

        .date-range-picker {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .date-range-picker .date-picker-container {
            flex: 1;
        }

        .scrollable-list {
            max-height: 200px;
            overflow-y: auto;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            background: white;
        }

        .scrollable-item {
            padding: 12px;
            border-bottom: 1px solid #f1f5f9;
            cursor: pointer;
            transition: background 0.2s;
        }

        .scrollable-item:hover {
            background: #f8fafc;
        }

        .scrollable-item.selected {
            background: #667eea;
            color: white;
        }

        .year-month-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .year-month-selector select {
            padding: 8px;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            background: white;
        }

        .inline-calendar {
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            background: white;
            width: 100%;
        }

        .week-picker {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            margin-top: 10px;
        }

        .week-day {
            padding: 8px;
            text-align: center;
            border: 1px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .week-day:hover {
            background: #edf2f7;
        }

        .week-day.selected {
            background: #667eea;
            color: white;
        }

        .multi-date-display {
            min-height: 60px;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            background: #f8fafc;
            margin-top: 10px;
        }

        .selected-date-tag {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            margin: 2px;
            font-size: 12px;
        }

        .selected-date-tag .remove {
            margin-left: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .form-actions {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .date-range-picker {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Enterprise Resource Management System</h1>
            <p>Comprehensive business application for employee management, project tracking, and resource allocation</p>
        </div>

        <!-- Employee Information Form -->
        <div class="form-section">
            <h2>Employee Information Management</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="emp-start-date">Employee Start Date</label>
                    <div class="date-picker-container">
                        <input type="text" id="emp-start-date" class="date-input" placeholder="Select start date" readonly data-action="click" data-subtask="date-picker">
                        <div class="calendar-dropdown" id="emp-start-calendar"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="emp-birth-date">Date of Birth</label>
                    <div class="date-picker-container">
                        <input type="text" id="emp-birth-date" class="date-input" placeholder="Select birth date" readonly data-action="click" data-subtask="date-picker">
                        <div class="calendar-dropdown" id="emp-birth-calendar"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="contract-end">Contract End Date</label>
                    <div class="quick-date-buttons">
                        <button class="quick-date-btn" data-action="click" data-subtask="quick-date" data-months="6">6 Months</button>
                        <button class="quick-date-btn" data-action="click" data-subtask="quick-date" data-months="12">1 Year</button>
                        <button class="quick-date-btn" data-action="click" data-subtask="quick-date" data-months="24">2 Years</button>
                        <button class="quick-date-btn" data-action="click" data-subtask="quick-date" data-months="36">3 Years</button>
                    </div>
                    <div class="date-picker-container">
                        <input type="text" id="contract-end" class="date-input" placeholder="Select contract end date" readonly data-action="click" data-subtask="date-picker">
                        <div class="calendar-dropdown" id="contract-end-calendar"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="review-date">Next Performance Review</label>
                    <div class="date-picker-container">
                        <input type="text" id="review-date" class="date-input" placeholder="Select review date" readonly data-action="click" data-subtask="date-picker">
                        <div class="calendar-dropdown" id="review-date-calendar"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Project Management Form -->
        <div class="form-section">
            <h2>Project Timeline Management</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label>Project Duration (Start - End Date)</label>
                    <div class="date-range-picker">
                        <div class="date-picker-container">
                            <input type="text" id="project-start" class="date-input" placeholder="Start date" readonly data-action="click" data-subtask="date-range-start">
                            <div class="calendar-dropdown" id="project-start-calendar"></div>
                        </div>
                        <span>to</span>
                        <div class="date-picker-container">
                            <input type="text" id="project-end" class="date-input" placeholder="End date" readonly data-action="click" data-subtask="date-range-end">
                            <div class="calendar-dropdown" id="project-end-calendar"></div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="milestone-dates">Project Milestones (Multiple Dates)</label>
                    <div class="date-picker-container">
                        <input type="text" id="milestone-dates" class="date-input" placeholder="Click to add milestone dates" readonly data-action="click" data-subtask="multi-date-picker">
                        <div class="calendar-dropdown" id="milestone-calendar"></div>
                    </div>
                    <div class="multi-date-display" id="milestone-display"></div>
                </div>

                <div class="form-group">
                    <label for="deadline-month">Project Deadline Month</label>
                    <select id="deadline-month" class="dropdown-select" data-action="change" data-subtask="month-dropdown">
                        <option value="">Select Month</option>
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="deadline-year">Project Deadline Year</label>
                    <select id="deadline-year" class="dropdown-select" data-action="change" data-subtask="year-dropdown">
                        <option value="">Select Year</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                        <option value="2026">2026</option>
                        <option value="2027">2027</option>
                        <option value="2028">2028</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Expense Report Form -->
        <div class="form-section">
            <h2>Expense Report & Financial Planning</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="expense-date">Expense Date with Time</label>
                    <div class="date-picker-container">
                        <input type="text" id="expense-date" class="date-input" placeholder="Select expense date" readonly data-action="click" data-subtask="datetime-picker">
                        <div class="calendar-dropdown" id="expense-calendar"></div>
                    </div>
                    <div class="time-picker" style="margin-top: 10px;">
                        <input type="text" id="expense-hour" class="time-input" value="12" readonly data-action="focus" data-subtask="time-input">
                        <div class="time-spinner">
                            <button type="button" data-action="click" data-subtask="time-up" data-target="expense-hour">▲</button>
                            <button type="button" data-action="click" data-subtask="time-down" data-target="expense-hour">▼</button>
                        </div>
                        <span>:</span>
                        <input type="text" id="expense-minute" class="time-input" value="00" readonly data-action="focus" data-subtask="time-input">
                        <div class="time-spinner">
                            <button type="button" data-action="click" data-subtask="time-up" data-target="expense-minute">▲</button>
                            <button type="button" data-action="click" data-subtask="time-down" data-target="expense-minute">▼</button>
                        </div>
                        <select id="expense-ampm" class="dropdown-select" style="width: auto;" data-action="change" data-subtask="ampm-dropdown">
                            <option value="AM">AM</option>
                            <option value="PM">PM</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="budget-period">Budget Period</label>
                    <div class="year-month-selector">
                        <select id="budget-month" class="dropdown-select" data-action="change" data-subtask="budget-month">
                            <option value="">Month</option>
                            <option value="1">January</option>
                            <option value="2">February</option>
                            <option value="3">March</option>
                            <option value="4">April</option>
                            <option value="5">May</option>
                            <option value="6">June</option>
                            <option value="7">July</option>
                            <option value="8">August</option>
                            <option value="9">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                        <select id="budget-year" class="dropdown-select" data-action="change" data-subtask="budget-year">
                            <option value="">Year</option>
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                            <option value="2026">2026</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="fiscal-quarter">Fiscal Quarter</label>
                    <select id="fiscal-quarter" class="dropdown-select" data-action="change" data-subtask="quarter-dropdown">
                        <option value="">Select Quarter</option>
                        <option value="Q1">Q1 (Jan-Mar)</option>
                        <option value="Q2">Q2 (Apr-Jun)</option>
                        <option value="Q3">Q3 (Jul-Sep)</option>
                        <option value="Q4">Q4 (Oct-Dec)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="payment-due">Payment Due Date</label>
                    <div class="date-picker-container">
                        <input type="text" id="payment-due" class="date-input" placeholder="Select due date" readonly data-action="click" data-subtask="due-date-picker">
                        <div class="calendar-dropdown" id="payment-due-calendar"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Advanced Date Selection -->
        <div class="form-section">
            <h2>Advanced Scheduling & Calendar Management</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="meeting-dates">Recurring Meeting Dates</label>
                    <div class="scrollable-list" data-action="scroll" data-subtask="date-scroll">
                        <div class="scrollable-item" data-action="click" data-subtask="scroll-date-select" data-date="2024-01-15">January 15, 2024 - Weekly Team Meeting</div>
                        <div class="scrollable-item" data-action="click" data-subtask="scroll-date-select" data-date="2024-01-22">January 22, 2024 - Weekly Team Meeting</div>
                        <div class="scrollable-item" data-action="click" data-subtask="scroll-date-select" data-date="2024-01-29">January 29, 2024 - Weekly Team Meeting</div>
                        <div class="scrollable-item" data-action="click" data-subtask="scroll-date-select" data-date="2024-02-05">February 5, 2024 - Weekly Team Meeting</div>
                        <div class="scrollable-item" data-action="click" data-subtask="scroll-date-select" data-date="2024-02-12">February 12, 2024 - Weekly Team Meeting</div>
                        <div class="scrollable-item" data-action="click" data-subtask="scroll-date-select" data-date="2024-02-19">February 19, 2024 - Weekly Team Meeting</div>
                        <div class="scrollable-item" data-action="click" data-subtask="scroll-date-select" data-date="2024-02-26">February 26, 2024 - Weekly Team Meeting</div>
                        <div class="scrollable-item" data-action="click" data-subtask="scroll-date-select" data-date="2024-03-05">March 5, 2024 - Weekly Team Meeting</div>
                        <div class="scrollable-item" data-action="click" data-subtask="scroll-date-select" data-date="2024-03-12">March 12, 2024 - Weekly Team Meeting</div>
                        <div class="scrollable-item" data-action="click" data-subtask="scroll-date-select" data-date="2024-03-19">March 19, 2024 - Weekly Team Meeting</div>
                        <div class="scrollable-item" data-action="click" data-subtask="scroll-date-select" data-date="2024-03-26">March 26, 2024 - Weekly Team Meeting</div>
                        <div class="scrollable-item" data-action="click" data-subtask="scroll-date-select" data-date="2024-04-02">April 2, 2024 - Weekly Team Meeting</div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Inline Calendar View</label>
                    <div class="inline-calendar" id="inline-calendar" data-action="interact" data-subtask="inline-calendar"></div>
                </div>

                <div class="form-group">
                    <label for="week-selection">Week Selection</label>
                    <div class="week-picker" id="week-picker" data-action="click" data-subtask="week-picker">
                        <div class="week-day" data-action="click" data-subtask="week-day" data-day="monday">Mon</div>
                        <div class="week-day" data-action="click" data-subtask="week-day" data-day="tuesday">Tue</div>
                        <div class="week-day" data-action="click" data-subtask="week-day" data-day="wednesday">Wed</div>
                        <div class="week-day" data-action="click" data-subtask="week-day" data-day="thursday">Thu</div>
                        <div class="week-day" data-action="click" data-subtask="week-day" data-day="friday">Fri</div>
                        <div class="week-day" data-action="click" data-subtask="week-day" data-day="saturday">Sat</div>
                        <div class="week-day" data-action="click" data-subtask="week-day" data-day="sunday">Sun</div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="holiday-dates">Company Holiday Dates</label>
                    <div class="date-picker-container">
                        <input type="text" id="holiday-dates" class="date-input" placeholder="Select holiday dates" readonly data-action="click" data-subtask="holiday-picker">
                        <div class="calendar-dropdown" id="holiday-calendar"></div>
                    </div>
                    <div class="multi-date-display" id="holiday-display"></div>
                </div>
            </div>
        </div>

        <!-- Resource Allocation -->
        <div class="form-section">
            <h2>Resource Allocation & Booking</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="resource-booking">Resource Booking Period</label>
                    <div class="date-range-picker">
                        <div class="date-picker-container">
                            <input type="text" id="resource-start" class="date-input" placeholder="Booking start" readonly data-action="click" data-subtask="resource-start">
                            <div class="calendar-dropdown" id="resource-start-calendar"></div>
                        </div>
                        <span>to</span>
                        <div class="date-picker-container">
                            <input type="text" id="resource-end" class="date-input" placeholder="Booking end" readonly data-action="click" data-subtask="resource-end">
                            <div class="calendar-dropdown" id="resource-end-calendar"></div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="maintenance-schedule">Maintenance Schedule</label>
                    <div class="quick-date-buttons">
                        <button class="quick-date-btn" data-action="click" data-subtask="maintenance-quick" data-type="weekly">Weekly</button>
                        <button class="quick-date-btn" data-action="click" data-subtask="maintenance-quick" data-type="monthly">Monthly</button>
                        <button class="quick-date-btn" data-action="click" data-subtask="maintenance-quick" data-type="quarterly">Quarterly</button>
                    </div>
                    <div class="date-picker-container">
                        <input type="text" id="maintenance-date" class="date-input" placeholder="Next maintenance date" readonly data-action="click" data-subtask="maintenance-picker">
                        <div class="calendar-dropdown" id="maintenance-calendar"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="training-sessions">Training Session Dates</label>
                    <div class="date-picker-container">
                        <input type="text" id="training-sessions" class="date-input" placeholder="Add training dates" readonly data-action="click" data-subtask="training-multi-picker">
                        <div class="calendar-dropdown" id="training-calendar"></div>
                    </div>
                    <div class="multi-date-display" id="training-display"></div>
                </div>

                <div class="form-group">
                    <label for="availability-check">Check Availability</label>
                    <div class="date-picker-container">
                        <input type="text" id="availability-date" class="date-input" placeholder="Check date availability" readonly data-action="click" data-subtask="availability-picker">
                        <div class="calendar-dropdown" id="availability-calendar"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-actions">
            <button type="button" class="btn btn-primary" data-action="click" data-subtask="form-submit">Save All Information</button>
            <button type="button" class="btn btn-secondary" data-action="click" data-subtask="form-reset">Reset Form</button>
            <button type="button" class="btn btn-secondary" data-action="click" data-subtask="form-preview">Preview Data</button>
        </div>
    </div>

    <script>
        // Global variables
        let currentCalendar = null;
        let selectedDates = {};
        let multiDateFields = ['milestone-dates', 'holiday-dates', 'training-sessions'];

        // Initialize all date pickers
        document.addEventListener('DOMContentLoaded', function() {
            initializeDatePickers();
            initializeInlineCalendar();
            initializeTimeSpinners();
            initializeScrollableList();
        });

        function initializeDatePickers() {
            const dateInputs = document.querySelectorAll('.date-input');
            dateInputs.forEach(input => {
                input.addEventListener('click', function() {
                    const calendarId = this.id + '-calendar';
                    const calendar = document.getElementById(calendarId);
                    if (calendar) {
                        showCalendar(calendar, this);
                    }
                });
            });

            // Close calendar when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.date-picker-container')) {
                    hideAllCalendars();
                }
            });
        }

        function showCalendar(calendar, input) {
            hideAllCalendars();
            currentCalendar = { element: calendar, input: input };
            
            const today = new Date();
            renderCalendar(calendar, today.getFullYear(), today.getMonth());
            calendar.style.display = 'block';
        }

        function hideAllCalendars() {
            const calendars = document.querySelectorAll('.calendar-dropdown');
            calendars.forEach(cal => cal.style.display = 'none');
        }

        function renderCalendar(calendar, year, month) {
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                              'July', 'August', 'September', 'October', 'November', 'December'];
            
            calendar.innerHTML = `
                <div class="calendar-header">
                    <button class="calendar-nav" onclick="changeMonth(-1)">‹</button>
                    <div class="calendar-title">${monthNames[month]} ${year}</div>
                    <button class="calendar-nav" onclick="changeMonth(1)">›</button>
                </div>
                <div class="calendar-grid">
                    <div class="calendar-day-header">Sun</div>
                    <div class="calendar-day-header">Mon</div>
                    <div class="calendar-day-header">Tue</div>
                    <div class="calendar-day-header">Wed</div>
                    <div class="calendar-day-header">Thu</div>
                    <div class="calendar-day-header">Fri</div>
                    <div class="calendar-day-header">Sat</div>
                </div>
            `;

            const grid = calendar.querySelector('.calendar-grid');
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const daysInPrevMonth = new Date(year, month, 0).getDate();

            // Previous month days
            for (let i = firstDay - 1; i >= 0; i--) {
                const day = daysInPrevMonth - i;
                const dayElement = createDayElement(day, true, year, month - 1);
                grid.appendChild(dayElement);
            }

            // Current month days
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = createDayElement(day, false, year, month);
                grid.appendChild(dayElement);
            }

            // Next month days
            const totalCells = grid.children.length - 7; // Subtract header row
            const remainingCells = 42 - totalCells; // 6 rows * 7 days
            for (let day = 1; day <= remainingCells; day++) {
                const dayElement = createDayElement(day, true, year, month + 1);
                grid.appendChild(dayElement);
            }

            calendar.currentYear = year;
            calendar.currentMonth = month;
        }

        function createDayElement(day, isOtherMonth, year, month) {
            const dayElement = document.createElement('div');
            dayElement.className = 'calendar-day' + (isOtherMonth ? ' other-month' : '');
            dayElement.textContent = day;
            dayElement.addEventListener('click', function() {
                selectDate(year, month, day);
            });
            return dayElement;
        }

        function changeMonth(direction) {
            if (!currentCalendar) return;
            
            const calendar = currentCalendar.element;
            let newMonth = calendar.currentMonth + direction;
            let newYear = calendar.currentYear;

            if (newMonth < 0) {
                newMonth = 11;
                newYear--;
            } else if (newMonth > 11) {
                newMonth = 0;
                newYear++;
            }

            renderCalendar(calendar, newYear, newMonth);
        }

        function selectDate(year, month, day) {
            if (!currentCalendar) return;

            const date = new Date(year, month, day);
            const dateString = formatDate(date);
            const input = currentCalendar.input;

            if (multiDateFields.includes(input.id)) {
                addMultiDate(input.id, dateString);
            } else {
                input.value = dateString;
                hideAllCalendars();
            }
        }

        function addMultiDate(fieldId, dateString) {
            if (!selectedDates[fieldId]) {
                selectedDates[fieldId] = [];
            }

            if (!selectedDates[fieldId].includes(dateString)) {
                selectedDates[fieldId].push(dateString);
                updateMultiDateDisplay(fieldId);
            }
        }

        function updateMultiDateDisplay(fieldId) {
            const displayId = fieldId.replace('-dates', '-display').replace('-sessions', '-display');
            const display = document.getElementById(displayId);
            if (!display || !selectedDates[fieldId]) return;

            display.innerHTML = selectedDates[fieldId].map(date => 
                `<span class="selected-date-tag">${date}<span class="remove" onclick="removeMultiDate('${fieldId}', '${date}')">×</span></span>`
            ).join('');
        }

        function removeMultiDate(fieldId, dateString) {
            if (selectedDates[fieldId]) {
                selectedDates[fieldId] = selectedDates[fieldId].filter(date => date !== dateString);
                updateMultiDateDisplay(fieldId);
            }
        }

        function formatDate(date) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        // Quick date button handlers
        document.querySelectorAll('.quick-date-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const months = this.dataset.months;
                const type = this.dataset.type;
                
                if (months) {
                    const futureDate = new Date();
                    futureDate.setMonth(futureDate.getMonth() + parseInt(months));
                    const targetInput = this.parentElement.nextElementSibling.querySelector('.date-input');
                    if (targetInput) {
                        targetInput.value = formatDate(futureDate);
                    }
                }

                if (type) {
                    handleMaintenanceQuickSelect(type);
                }
            });
        });

        function handleMaintenanceQuickSelect(type) {
            const maintenanceInput = document.getElementById('maintenance-date');
            const today = new Date();
            let nextDate = new Date(today);

            switch(type) {
                case 'weekly':
                    nextDate.setDate(today.getDate() + 7);
                    break;
                case 'monthly':
                    nextDate.setMonth(today.getMonth() + 1);
                    break;
                case 'quarterly':
                    nextDate.setMonth(today.getMonth() + 3);
                    break;
            }

            maintenanceInput.value = formatDate(nextDate);
        }

        // Time spinner functionality
        function initializeTimeSpinners() {
            document.querySelectorAll('[data-subtask="time-up"], [data-subtask="time-down"]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const target = document.getElementById(this.dataset.target);
                    const isUp = this.dataset.subtask === 'time-up';
                    const isHour = this.dataset.target.includes('hour');
                    
                    let currentValue = parseInt(target.value);
                    
                    if (isHour) {
                        if (isUp) {
                            currentValue = currentValue >= 12 ? 1 : currentValue + 1;
                        } else {
                            currentValue = currentValue <= 1 ? 12 : currentValue - 1;
                        }
                    } else {
                        if (isUp) {
                            currentValue = currentValue >= 59 ? 0 : currentValue + 1;
                        } else {
                            currentValue = currentValue <= 0 ? 59 : currentValue - 1;
                        }
                    }
                    
                    target.value = currentValue.toString().padStart(2, '0');
                });
            });
        }

        // Inline calendar
        function initializeInlineCalendar() {
            const inlineCalendar = document.getElementById('inline-calendar');
            const today = new Date();
            renderCalendar(inlineCalendar, today.getFullYear(), today.getMonth());
            inlineCalendar.style.display = 'block';
        }

        // Scrollable list functionality
        function initializeScrollableList() {
            document.querySelectorAll('.scrollable-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.scrollable-item').forEach(i => i.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
        }

        // Week picker functionality
        document.querySelectorAll('.week-day').forEach(day => {
            day.addEventListener('click', function() {
                this.classList.toggle('selected');
            });
        });

        // Form actions
        document.querySelector('[data-subtask="form-submit"]').addEventListener('click', function() {
            alert('Form data saved successfully!');
        });

        document.querySelector('[data-subtask="form-reset"]').addEventListener('click', function() {
            if (confirm('Are you sure you want to reset all form data?')) {
                document.querySelectorAll('.date-input').forEach(input => input.value = '');
                document.querySelectorAll('select').forEach(select => select.selectedIndex = 0);
                selectedDates = {};
                document.querySelectorAll('.multi-date-display').forEach(display => display.innerHTML = '');
                document.querySelectorAll('.selected').forEach(item => item.classList.remove('selected'));
            }
        });

        document.querySelector('[data-subtask="form-preview"]').addEventListener('click', function() {
            const formData = {};
            document.querySelectorAll('.date-input, select').forEach(input => {
                if (input.value) {
                    formData[input.id] = input.value;
                }
            });
            console.log('Form Data:', formData);
            alert('Form data logged to console. Check developer tools.');
        });
    </script>
</body>
</html>
