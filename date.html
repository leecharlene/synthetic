
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise Date Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            padding: 40px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }

        .section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            border: 1px solid #e9ecef;
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .date-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .date-input:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .custom-datepicker {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .datepicker-input {
            width: 100%;
            padding: 12px 40px 12px 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            background: white;
        }

        .datepicker-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            pointer-events: none;
        }

        .calendar-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            z-index: 1000;
            display: none;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #3498db;
            color: white;
        }

        .nav-button {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.3s ease;
        }

        .nav-button:hover {
            background: rgba(255,255,255,0.2);
        }

        .month-year-selector {
            display: flex;
            gap: 10px;
        }

        .month-select, .year-select {
            background: white;
            color: #2c3e50;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #ddd;
            margin: 1px;
        }

        .day-header {
            background: #ecf0f1;
            padding: 10px;
            text-align: center;
            font-weight: 600;
            color: #2c3e50;
        }

        .day-cell {
            background: white;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .day-cell:hover {
            background: #e3f2fd;
        }

        .day-cell.selected {
            background: #3498db;
            color: white;
        }

        .day-cell.other-month {
            color: #bdc3c7;
        }

        .day-cell.today {
            background: #e74c3c;
            color: white;
            font-weight: bold;
        }

        .time-picker {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 15px;
        }

        .time-input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 80px;
            text-align: center;
        }

        .date-range-picker {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .date-range-input {
            flex: 1;
        }

        .quick-dates {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .quick-date-btn {
            padding: 10px;
            background: #ecf0f1;
            border: 1px solid #bdc3c7;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .quick-date-btn:hover {
            background: #3498db;
            color: white;
        }

        .inline-calendar {
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
            margin-top: 15px;
        }

        .calendar-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-bottom: 1px solid #ddd;
        }

        .scroll-picker {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 15px;
        }

        .scroll-column {
            width: 80px;
            height: 150px;
            overflow-y: scroll;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
        }

        .scroll-item {
            padding: 10px;
            text-align: center;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            transition: background 0.2s ease;
        }

        .scroll-item:hover {
            background: #e3f2fd;
        }

        .scroll-item.selected {
            background: #3498db;
            color: white;
        }

        .multi-date-selector {
            margin-top: 15px;
        }

        .selected-dates {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .date-tag {
            background: #3498db;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .remove-date {
            cursor: pointer;
            font-weight: bold;
        }

        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #95a5a6;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .timezone-selector {
            margin-top: 15px;
        }

        .timezone-select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        .recurring-options {
            margin-top: 15px;
        }

        .recurring-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .recurring-option {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .recurring-option.selected {
            border-color: #3498db;
            background: #e3f2fd;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Enterprise Date Management System</h1>
            <p>Comprehensive date and time selection interface for business applications</p>
        </div>

        <div class="main-content">
            <!-- Basic Date Inputs Section -->
            <div class="section">
                <h2>Basic Date Inputs</h2>
                
                <div class="form-group">
                    <label for="basic-date">Standard Date Input:</label>
                    <input type="date" id="basic-date" class="date-input" data-action="select-date" data-subtask="basic-date-input">
                </div>

                <div class="form-group">
                    <label for="datetime-local">Date and Time:</label>
                    <input type="datetime-local" id="datetime-local" class="date-input" data-action="select-datetime" data-subtask="datetime-input">
                </div>

                <div class="form-group">
                    <label for="time-input">Time Only:</label>
                    <input type="time" id="time-input" class="date-input" data-action="select-time" data-subtask="time-input">
                </div>

                <div class="form-group">
                    <label for="month-input">Month and Year:</label>
                    <input type="month" id="month-input" class="date-input" data-action="select-month" data-subtask="month-input">
                </div>

                <div class="form-group">
                    <label for="week-input">Week Selection:</label>
                    <input type="week" id="week-input" class="date-input" data-action="select-week" data-subtask="week-input">
                </div>
            </div>

            <!-- Custom Dropdown Calendar -->
            <div class="section">
                <h2>Custom Dropdown Calendar</h2>
                
                <div class="form-group">
                    <label>Event Date:</label>
                    <div class="custom-datepicker">
                        <input type="text" class="datepicker-input" id="custom-date-1" placeholder="Select date..." readonly data-action="open-calendar" data-subtask="custom-datepicker">
                        <span class="datepicker-icon">📅</span>
                        <div class="calendar-dropdown" id="calendar-1">
                            <div class="calendar-header">
                                <button class="nav-button" id="prev-month-1" data-action="navigate-month" data-subtask="previous-month">‹</button>
                                <div class="month-year-selector">
                                    <select class="month-select" id="month-select-1" data-action="select-month-dropdown" data-subtask="month-dropdown">
                                        <option value="0">January</option>
                                        <option value="1">February</option>
                                        <option value="2">March</option>
                                        <option value="3">April</option>
                                        <option value="4">May</option>
                                        <option value="5">June</option>
                                        <option value="6">July</option>
                                        <option value="7">August</option>
                                        <option value="8">September</option>
                                        <option value="9">October</option>
                                        <option value="10">November</option>
                                        <option value="11">December</option>
                                    </select>
                                    <select class="year-select" id="year-select-1" data-action="select-year-dropdown" data-subtask="year-dropdown">
                                        <!-- Years will be populated by JavaScript -->
                                    </select>
                                </div>
                                <button class="nav-button" id="next-month-1" data-action="navigate-month" data-subtask="next-month">›</button>
                            </div>
                            <div class="calendar-grid" id="calendar-grid-1">
                                <!-- Calendar will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Meeting Date with Time:</label>
                    <div class="custom-datepicker">
                        <input type="text" class="datepicker-input" id="custom-date-2" placeholder="Select date and time..." readonly data-action="open-calendar-time" data-subtask="datetime-picker">
                        <span class="datepicker-icon">🕒</span>
                        <div class="calendar-dropdown" id="calendar-2">
                            <div class="calendar-header">
                                <button class="nav-button" id="prev-month-2" data-action="navigate-month" data-subtask="previous-month-2">‹</button>
                                <div class="month-year-selector">
                                    <select class="month-select" id="month-select-2" data-action="select-month-dropdown" data-subtask="month-dropdown-2">
                                        <option value="0">January</option>
                                        <option value="1">February</option>
                                        <option value="2">March</option>
                                        <option value="3">April</option>
                                        <option value="4">May</option>
                                        <option value="5">June</option>
                                        <option value="6">July</option>
                                        <option value="7">August</option>
                                        <option value="8">September</option>
                                        <option value="9">October</option>
                                        <option value="10">November</option>
                                        <option value="11">December</option>
                                    </select>
                                    <select class="year-select" id="year-select-2" data-action="select-year-dropdown" data-subtask="year-dropdown-2">
                                        <!-- Years will be populated by JavaScript -->
                                    </select>
                                </div>
                                <button class="nav-button" id="next-month-2" data-action="navigate-month" data-subtask="next-month-2">›</button>
                            </div>
                            <div class="calendar-grid" id="calendar-grid-2">
                                <!-- Calendar will be populated by JavaScript -->
                            </div>
                            <div class="time-picker">
                                <label>Time:</label>
                                <input type="number" class="time-input" id="hour-input" min="0" max="23" placeholder="HH" data-action="select-hour" data-subtask="hour-input">
                                <span>:</span>
                                <input type="number" class="time-input" id="minute-input" min="0" max="59" placeholder="MM" data-action="select-minute" data-subtask="minute-input">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Date Range Picker -->
            <div class="section">
                <h2>Date Range Selection</h2>
                
                <div class="form-group">
                    <label>Project Duration:</label>
                    <div class="date-range-picker">
                        <div class="date-range-input">
                            <input type="date" id="start-date" class="date-input" data-action="select-start-date" data-subtask="range-start">
                            <small>Start Date</small>
                        </div>
                        <span>to</span>
                        <div class="date-range-input">
                            <input type="date" id="end-date" class="date-input" data-action="select-end-date" data-subtask="range-end">
                            <small>End Date</small>
                        </div>
                    </div>
                </div>

                <div class="quick-dates">
                    <button class="quick-date-btn" data-action="quick-select" data-subtask="today" onclick="setQuickDate('today')">Today</button>
                    <button class="quick-date-btn" data-action="quick-select" data-subtask="tomorrow" onclick="setQuickDate('tomorrow')">Tomorrow</button>
                    <button class="quick-date-btn" data-action="quick-select" data-subtask="this-week" onclick="setQuickDate('thisWeek')">This Week</button>
                    <button class="quick-date-btn" data-action="quick-select" data-subtask="next-week" onclick="setQuickDate('nextWeek')">Next Week</button>
                    <button class="quick-date-btn" data-action="quick-select" data-subtask="this-month" onclick="setQuickDate('thisMonth')">This Month</button>
                    <button class="quick-date-btn" data-action="quick-select" data-subtask="next-month" onclick="setQuickDate('nextMonth')">Next Month</button>
                </div>
            </div>

            <!-- Inline Calendar -->
            <div class="section">
                <h2>Inline Calendar View</h2>
                
                <div class="inline-calendar">
                    <div class="calendar-controls">
                        <button class="nav-button" id="inline-prev" data-action="navigate-inline" data-subtask="inline-previous">‹ Previous</button>
                        <div class="month-year-selector">
                            <select class="month-select" id="inline-month" data-action="select-inline-month" data-subtask="inline-month-select">
                                <option value="0">January</option>
                                <option value="1">February</option>
                                <option value="2">March</option>
                                <option value="3">April</option>
                                <option value="4">May</option>
                                <option value="5">June</option>
                                <option value="6">July</option>
                                <option value="7">August</option>
                                <option value="8">September</option>
                                <option value="9">October</option>
                                <option value="10">November</option>
                                <option value="11">December</option>
                            </select>
                            <select class="year-select" id="inline-year" data-action="select-inline-year" data-subtask="inline-year-select">
                                <!-- Years will be populated by JavaScript -->
                            </select>
                        </div>
                        <button class="nav-button" id="inline-next" data-action="navigate-inline" data-subtask="inline-next">Next ›</button>
                    </div>
                    <div class="calendar-grid" id="inline-calendar-grid">
                        <!-- Calendar will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Scroll Date Picker -->
            <div class="section">
                <h2>Scroll Date Picker</h2>
                
                <div class="form-group">
                    <label>Appointment Date:</label>
                    <div class="scroll-picker">
                        <div class="scroll-column" id="month-scroll" data-action="scroll-select" data-subtask="scroll-month">
                            <div class="scroll-item" data-value="0">January</div>
                            <div class="scroll-item" data-value="1">February</div>
                            <div class="scroll-item" data-value="2">March</div>
                            <div class="scroll-item" data-value="3">April</div>
                            <div class="scroll-item" data-value="4">May</div>
                            <div class="scroll-item" data-value="5">June</div>
                            <div class="scroll-item" data-value="6">July</div>
                            <div class="scroll-item" data-value="7">August</div>
                            <div class="scroll-item" data-value="8">September</div>
                            <div class="scroll-item" data-value="9">October</div>
                            <div class="scroll-item" data-value="10">November</div>
                            <div class="scroll-item" data-value="11">December</div>
                        </div>
                        <div class="scroll-column" id="day-scroll" data-action="scroll-select" data-subtask="scroll-day">
                            <!-- Days will be populated by JavaScript -->
                        </div>
                        <div class="scroll-column" id="year-scroll" data-action="scroll-select" data-subtask="scroll-year">
                            <!-- Years will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Multi-Date Selector -->
            <div class="section full-width">
                <h2>Multiple Date Selection</h2>
                
                <div class="form-group">
                    <label>Training Session Dates:</label>
                    <div class="custom-datepicker">
                        <input type="text" class="datepicker-input" id="multi-date-input" placeholder="Click to add multiple dates..." readonly data-action="open-multi-calendar" data-subtask="multi-date-picker">
                        <span class="datepicker-icon">📅</span>
                        <div class="calendar-dropdown" id="multi-calendar">
                            <div class="calendar-header">
                                <button class="nav-button" id="multi-prev" data-action="navigate-multi" data-subtask="multi-previous">‹</button>
                                <div class="month-year-selector">
                                    <select class="month-select" id="multi-month" data-action="select-multi-month" data-subtask="multi-month-dropdown">
                                        <option value="0">January</option>
                                        <option value="1">February</option>
                                        <option value="2">March</option>
                                        <option value="3">April</option>
                                        <option value="4">May</option>
                                        <option value="5">June</option>
                                        <option value="6">July</option>
                                        <option value="7">August</option>
                                        <option value="8">September</option>
                                        <option value="9">October</option>
                                        <option value="10">November</option>
                                        <option value="11">December</option>
                                    </select>
                                    <select class="year-select" id="multi-year" data-action="select-multi-year" data-subtask="multi-year-dropdown">
                                        <!-- Years will be populated by JavaScript -->
                                    </select>
                                </div>
                                <button class="nav-button" id="multi-next" data-action="navigate-multi" data-subtask="multi-next">›</button>
                            </div>
                            <div class="calendar-grid" id="multi-calendar-grid">
                                <!-- Calendar will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    <div class="selected-dates" id="selected-dates">
                        <!-- Selected dates will appear here -->
                    </div>
                </div>

                <div class="form-group">
                    <label>Timezone:</label>
                    <div class="timezone-selector">
                        <select class="timezone-select" id="timezone" data-action="select-timezone" data-subtask="timezone-selection">
                            <option value="UTC">UTC (Coordinated Universal Time)</option>
                            <option value="EST">EST (Eastern Standard Time)</option>
                            <option value="CST">CST (Central Standard Time)</option>
                            <option value="MST">MST (Mountain Standard Time)</option>
                            <option value="PST">PST (Pacific Standard Time)</option>
                            <option value="GMT">GMT (Greenwich Mean Time)</option>
                            <option value="CET">CET (Central European Time)</option>
                            <option value="JST">JST (Japan Standard Time)</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Recurring Pattern:</label>
                    <div class="recurring-options">
                        <div class="recurring-grid">
                            <div class="recurring-option" data-action="select-recurring" data-subtask="recurring-none" onclick="selectRecurring('none')">None</div>
                            <div class="recurring-option" data-action="select-recurring" data-subtask="recurring-daily" onclick="selectRecurring('daily')">Daily</div>
                            <div class="recurring-option" data-action="select-recurring" data-subtask="recurring-weekly" onclick="selectRecurring('weekly')">Weekly</div>
                            <div class="recurring-option" data-action="select-recurring" data-subtask="recurring-monthly" onclick="selectRecurring('monthly')">Monthly</div>
                            <div class="recurring-option" data-action="select-recurring" data-subtask="recurring-yearly" onclick="selectRecurring('yearly')">Yearly</div>
                            <div class="recurring-option" data-action="select-recurring" data-subtask="recurring-custom" onclick="selectRecurring('custom')">Custom</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <button class="btn" data-action="save-dates" data-subtask="save-button" onclick="saveDates()">Save All Dates</button>
                    <button class="btn btn-secondary" data-action="clear-dates" data-subtask="clear-button" onclick="clearAllDates()">Clear All</button>
                    <button class="btn btn-secondary" data-action="export-dates" data-subtask="export-button" onclick="exportDates()">Export Dates</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let selectedDates = [];
        let currentCalendar = null;
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeDatePickers();
            populateYearSelects();
            populateScrollPickers();
            setupEventListeners();
        });

        function initializeDatePickers() {
            // Initialize all calendar grids
            updateCalendar('calendar-grid-1', 'month-select-1', 'year-select-1');
            updateCalendar('calendar-grid-2', 'month-select-2', 'year-select-2');
            updateCalendar('inline-calendar-grid', 'inline-month', 'inline-year');
            updateCalendar('multi-calendar-grid', 'multi-month', 'multi-year');
        }

        function populateYearSelects() {
            const currentYear = new Date().getFullYear();
            const yearSelects = document.querySelectorAll('.year-select');
            
            yearSelects.forEach(select => {
                select.innerHTML = '';
                for (let year = currentYear - 10; year <= currentYear + 10; year++) {
                    const option = document.createElement('option');
                    option.value = year;
                    option.textContent = year;
                    if (year === currentYear) option.selected = true;
                    select.appendChild(option);
                }
            });
        }

        function populateScrollPickers() {
            // Populate day scroll
            const dayScroll = document.getElementById('day-scroll');
            for (let day = 1; day <= 31; day++) {
                const div = document.createElement('div');
                div.className = 'scroll-item';
                div.dataset.value = day;
                div.textContent = day;
                dayScroll.appendChild(div);
            }

            // Populate year scroll
            const yearScroll = document.getElementById('year-scroll');
            const currentYear = new Date().getFullYear();
            for (let year = currentYear - 10; year <= currentYear + 10; year++) {
                const div = document.createElement('div');
                div.className = 'scroll-item';
                div.dataset.value = year;
                div.textContent = year;
                yearScroll.appendChild(div);
            }
        }

        function setupEventListeners() {
            // Custom datepicker inputs
            document.querySelectorAll('.datepicker-input').forEach(input => {
                input.addEventListener('click', function() {
                    const calendarId = this.id.replace('custom-date-', 'calendar-');
                    const calendar = document.getElementById(calendarId);
                    
                    // Close other calendars
                    document.querySelectorAll('.calendar-dropdown').forEach(cal => {
                        if (cal.id !== calendarId) cal.style.display = 'none';
                    });
                    
                    calendar.style.display = calendar.style.display === 'block' ? 'none' : 'block';
                });
            });

            // Multi-date input
            document.getElementById('multi-date-input').addEventListener('click', function() {
                const calendar = document.getElementById('multi-calendar');
                calendar.style.display = calendar.style.display === 'block' ? 'none' : 'block';
            });

            // Month/Year selectors
            document.querySelectorAll('.month-select, .year-select').forEach(select => {
                select.addEventListener('change', function() {
                    const calendarId = this.id.includes('inline') ? 'inline-calendar-grid' : 
                                     this.id.includes('multi') ? 'multi-calendar-grid' :
                                     this.id.includes('1') ? 'calendar-grid-1' : 'calendar-grid-2';
                    const monthSelectId = this.id.includes('inline') ? 'inline-month' :
                                        this.id.includes('multi') ? 'multi-month' :
                                        this.id.includes('1') ? 'month-select-1' : 'month-select-2';
                    const yearSelectId = this.id.includes('inline') ? 'inline-year' :
                                       this.id.includes('multi') ? 'multi-year' :
                                       this.id.includes('1') ? 'year-select-1' : 'year-select-2';
                    updateCalendar(calendarId, monthSelectId, yearSelectId);
                });
            });

            // Navigation buttons
            document.querySelectorAll('.nav-button').forEach(button => {
                button.addEventListener('click', function() {
                    const isNext = this.textContent.includes('›') || this.textContent.includes('Next');
                    const isPrev = this.textContent.includes('‹') || this.textContent.includes('Previous');
                    
                    let monthSelectId, yearSelectId, calendarId;
                    
                    if (this.id.includes('inline')) {
                        monthSelectId = 'inline-month';
                        yearSelectId = 'inline-year';
                        calendarId = 'inline-calendar-grid';
                    } else if (this.id.includes('multi')) {
                        monthSelectId = 'multi-month';
                        yearSelectId = 'multi-year';
                        calendarId = 'multi-calendar-grid';
                    } else if (this.id.includes('1')) {
                        monthSelectId = 'month-select-1';
                        yearSelectId = 'year-select-1';
                        calendarId = 'calendar-grid-1';
                    } else {
                        monthSelectId = 'month-select-2';
                        yearSelectId = 'year-select-2';
                        calendarId = 'calendar-grid-2';
                    }
                    
                    const monthSelect = document.getElementById(monthSelectId);
                    const yearSelect = document.getElementById(yearSelectId);
                    
                    let month = parseInt(monthSelect.value);
                    let year = parseInt(yearSelect.value);
                    
                    if (isNext) {
                        month++;
                        if (month > 11) {
                            month = 0;
                            year++;
                        }
                    } else if (isPrev) {
                        month--;
                        if (month < 0) {
                            month = 11;
                            year--;
                        }
                    }
                    
                    monthSelect.value = month;
                    yearSelect.value = year;
                    updateCalendar(calendarId, monthSelectId, yearSelectId);
                });
            });

            // Scroll picker items
            document.querySelectorAll('.scroll-item').forEach(item => {
                item.addEventListener('click', function() {
                    // Remove selected class from siblings
                    this.parentElement.querySelectorAll('.scroll-item').forEach(sibling => {
                        sibling.classList.remove('selected');
                    });
                    // Add selected class to clicked item
                    this.classList.add('selected');
                });
            });

            // Close calendars when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.custom-datepicker')) {
                    document.querySelectorAll('.calendar-dropdown').forEach(calendar => {
                        calendar.style.display = 'none';
                    });
                }
            });
        }

        function updateCalendar(calendarId, monthSelectId, yearSelectId) {
            const calendar = document.getElementById(calendarId);
            const monthSelect = document.getElementById(monthSelectId);
            const yearSelect = document.getElementById(yearSelectId);
            
            const month = parseInt(monthSelect.value);
            const year = parseInt(yearSelect.value);
            
            calendar.innerHTML = '';
            
            // Add day headers
            const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayHeaders.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'day-header';
                dayHeader.textContent = day;
                calendar.appendChild(dayHeader);
            });
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const daysInPrevMonth = new Date(year, month, 0).getDate();
            
            // Add empty cells for previous month
            for (let i = firstDay - 1; i >= 0; i--) {
                const dayCell = document.createElement('div');
                dayCell.className = 'day-cell other-month';
                dayCell.textContent = daysInPrevMonth - i;
                calendar.appendChild(dayCell);
            }
            
            // Add days of current month
            const today = new Date();
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                dayCell.className = 'day-cell';
                dayCell.textContent = day;
                
                // Check if today
                if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
                    dayCell.classList.add('today');
                }
                
                // Add click event
                dayCell.addEventListener('click', function() {
                    if (calendarId === 'multi-calendar-grid') {
                        handleMultiDateSelection(year, month, day, this);
                    } else {
                        handleSingleDateSelection(year, month, day, this, calendarId);
                    }
                });
                
                calendar.appendChild(dayCell);
            }
            
            // Add remaining cells for next month
            const totalCells = calendar.children.length;
            const remainingCells = 42 - totalCells; // 6 rows × 7 days
            for (let day = 1; day <= remainingCells; day++) {
                const dayCell = document.createElement('div');
                dayCell.className = 'day-cell other-month';
                dayCell.textContent = day;
                calendar.appendChild(dayCell);
            }
        }

        function handleSingleDateSelection(year, month, day, cell, calendarId) {
            // Remove previous selection
            cell.parentElement.querySelectorAll('.day-cell').forEach(c => c.classList.remove('selected'));
            cell.classList.add('selected');
            
            const date = new Date(year, month, day);
            const formattedDate = date.toISOString().split('T')[0];
            
            // Update corresponding input
            if (calendarId.includes('1')) {
                document.getElementById('custom-date-1').value = formattedDate;
                document.getElementById('calendar-1').style.display = 'none';
            } else if (calendarId.includes('2')) {
                const hour = document.getElementById('hour-input').value || '09';
                const minute = document.getElementById('minute-input').value || '00';
                document.getElementById('custom-date-2').value = `${formattedDate} ${hour}:${minute}`;
                document.getElementById('calendar-2').style.display = 'none';
            } else if (calendarId.includes('inline')) {
                // For inline calendar, just show selection
                console.log('Selected date:', formattedDate);
            }
        }

        function handleMultiDateSelection(year, month, day, cell) {
            const date = new Date(year, month, day);
            const formattedDate = date.toISOString().split('T')[0];
            
            if (cell.classList.contains('selected')) {
                // Remove date
                cell.classList.remove('selected');
                selectedDates = selectedDates.filter(d => d !== formattedDate);
            } else {
                // Add date
                cell.classList.add('selected');
                selectedDates.push(formattedDate);
            }
            
            updateSelectedDatesDisplay();
        }

        function updateSelectedDatesDisplay() {
            const container = document.getElementById('selected-dates');
            container.innerHTML = '';
            
            selectedDates.forEach(date => {
                const tag = document.createElement('div');
                tag.className = 'date-tag';
                tag.innerHTML = `${date} <span class="remove-date" onclick="removeDate('${date}')">×</span>`;
                container.appendChild(tag);
            });
            
            document.getElementById('multi-date-input').value = `${selectedDates.length} dates selected`;
        }

        function removeDate(date) {
            selectedDates = selectedDates.filter(d => d !== date);
            updateSelectedDatesDisplay();
            
            // Remove visual selection from calendar
            document.querySelectorAll('.day-cell.selected').forEach(cell => {
                const cellDate = new Date(
                    parseInt(document.getElementById('multi-year').value),
                    parseInt(document.getElementById('multi-month').value),
                    parseInt(cell.textContent)
                ).toISOString().split('T')[0];
                
                if (cellDate === date) {
                    cell.classList.remove('selected');
                }
            });
        }

        function setQuickDate(period) {
            const today = new Date();
            let startDate, endDate;
            
            switch(period) {
                case 'today':
                    startDate = endDate = today;
                    break;
                case 'tomorrow':
                    startDate = endDate = new Date(today.getTime() + 24 * 60 * 60 * 1000);
                    break;
                case 'thisWeek':
                    startDate = new Date(today.setDate(today.getDate() - today.getDay()));
                    endDate = new Date(today.setDate(today.getDate() - today.getDay() + 6));
                    break;
                case 'nextWeek':
                    startDate = new Date(today.setDate(today.getDate() - today.getDay() + 7));
                    endDate = new Date(today.setDate(today.getDate() - today.getDay() + 13));
                    break;
                case 'thisMonth':
                    startDate = new Date(today.getFullYear(), today.getMonth(), 1);
                    endDate = new Date(today.getFullYear(), today.getMonth() + 1, 0);
                    break;
                case 'nextMonth':
                    startDate = new Date(today.getFullYear(), today.getMonth() + 1, 1);
                    endDate = new Date(today.getFullYear(), today.getMonth() + 2, 0);
                    break;
            }
            
            document.getElementById('start-date').value = startDate.toISOString().split('T')[0];
            document.getElementById('end-date').value = endDate.toISOString().split('T')[0];
        }

        function selectRecurring(pattern) {
            document.querySelectorAll('.recurring-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        function saveDates() {
            const allDates = {
                basicDate: document.getElementById('basic-date').value,
                datetime: document.getElementById('datetime-local').value,
                time: document.getElementById('time-input').value,
                month: document.getElementById('month-input').value,
                week: document.getElementById('week-input').value,
                customDate1: document.getElementById('custom-date-1').value,
                customDate2: document.getElementById('custom-date-2').value,
                startDate: document.getElementById('start-date').value,
                endDate: document.getElementById('end-date').value,
                selectedDates: selectedDates,
                timezone: document.getElementById('timezone').value,
                recurring: document.querySelector('.recurring-option.selected')?.textContent || 'None'
            };
            
            alert('Dates saved successfully!\n\n' + JSON.stringify(allDates, null, 2));
        }

        function clearAllDates() {
            // Clear all inputs
            document.querySelectorAll('input[type="date"], input[type="datetime-local"], input[type="time"], input[type="month"], input[type="week"]').forEach(input => {
                input.value = '';
            });
            
            document.querySelectorAll('.datepicker-input').forEach(input => {
                input.value = '';
            });
            
            // Clear selected dates
            selectedDates = [];
            updateSelectedDatesDisplay();
            
            // Clear selections
            document.querySelectorAll('.day-cell.selected, .scroll-item.selected, .recurring-option.selected').forEach(item => {
                item.classList.remove('selected');
            });
            
            alert('All dates cleared!');
        }

        function exportDates() {
            const allDates = {
                basicDate: document.getElementById('basic-date').value,
                datetime: document.getElementById('datetime-local').value,
                time: document.getElementById('time-input').value,
                month: document.getElementById('month-input').value,
                week: document.getElementById('week-input').value,
                customDate1: document.getElementById('custom-date-1').value,
                customDate2: document.getElementById('custom-date-2').value,
                startDate: document.getElementById('start-date').value,
                endDate: document.getElementById('end-date').value,
                selectedDates: selectedDates,
                timezone: document.getElementById('timezone').value,
                recurring: document.querySelector('.recurring-option.selected')?.textContent || 'None'
            };
            
            const dataStr = JSON.stringify(allDates, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'exported_dates.json';
            link.click();
        }
    </script>
</body>
</html>
